<!DOCTYPE html>
<html lang="el" class="no-js">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
<title>GlobalDiscovery</title>
<meta name="description" content="GlobalDiscovery" />
<meta name="keywords" content="3d, room, exhibition, gallery, perspective, animation, web design, Greek history" />
<meta name="author" content="globaldiscovery" />
<link rel="shortcut icon" href="favicon.ico">
<link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="https://tympanus.net/Development/Exhibition/css/normalize.css" />
<link rel="stylesheet" type="text/css" href="https://tympanus.net/Development/Exhibition/css/demo.css" />
<style>
body { margin:0; background:#000; min-height:100dvh; font-family:'Josefin Sans',sans-serif; color:white; overflow:hidden; }
.container { height:100dvh; position:relative; overflow:hidden; touch-action:none; }
.scroller { width:100%; height:100%; transform-origin:50% 50%; transition:transform 0.12s ease-out; }
.room { width:100%; height:100%; position:absolute; top:0; left:0; transform-style:preserve-3d; transition:opacity 0.5s ease; display:none; }
.room.active { display:block; opacity:1; pointer-events:auto; }
.room__side { position:absolute; inset:0; backface-visibility:hidden; display:flex; flex-wrap:wrap; justify-content:center; align-items:flex-start; gap:30px 40px; padding:clamp(20px,5vw,40px); overflow-y:auto; -webkit-overflow-scrolling:touch; background:rgba(10,10,30,0.55); }
.video-background { position:absolute; inset:0; z-index:0; overflow:hidden; pointer-events:none; }
.video-background iframe { position:absolute; top:50%; left:50%; width:120%; height:120%; transform:translate(-50%,-50%); border:none; }
.room__img-wrapper { text-align:center; flex:0 0 auto; max-width:280px; cursor:pointer; position:relative; z-index:10; }
.room__img { width:auto; max-width:100%; max-height:clamp(160px,28vh,220px); display:block; margin:0 auto 8px auto; object-fit:contain; }
.caption { color:white; font-size:clamp(0.85rem,2.4vw,0.95rem); text-align:center; text-shadow:1px 1px 4px black; pointer-events:none; }
.content { position:absolute; top:0; left:0; width:100%; z-index:200; pointer-events:none; padding:clamp(10px,3vw,20px); box-sizing:border-box; text-align:center; }
.codrops-header__title { font-size:clamp(2.2rem,7vw,2.8rem); margin:0 0 0.3em 0; text-shadow:0 2px 10px rgba(0,0,0,0.9); }
.subject { font-size:clamp(1.2rem,4vw,1.5rem); margin:0; }
.location { font-size:clamp(1rem,3.2vw,1.2rem); margin:1em 0 0 0; }
#popup { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:rgba(20,20,40,0.95); padding:clamp(15px,5vw,25px); border-radius:12px; max-width:90vw; max-height:85vh; overflow-y:auto; color:#fff; text-align:center; font-size:clamp(1rem,3.5vw,1.1rem); box-shadow:0 0 25px black; display:none; z-index:500; }
#popup button { margin-top:15px; padding:8px 16px; font-size:0.9rem; cursor:pointer; border:none; border-radius:6px; background:#333; color:#fff; }
#room-nav { position:absolute; top:50%; width:100%; display:flex; justify-content:space-between; transform:translateY(-50%); z-index:300; pointer-events:auto; padding:0 10px; }
#room-nav button { background:rgba(0,0,0,0.5); border:none; color:white; font-size:clamp(2rem,8vw,3rem); width:clamp(50px,14vw,70px); height:clamp(50px,14vw,70px); border-radius:50%; cursor:pointer; transition:background 0.3s; }
#room-nav button:hover { background:rgba(0,0,0,0.8); }
@media(max-width:640px){ .room__side{ gap:20px 30px; padding:clamp(15px,6vw,30px); } .room__img-wrapper{ max-width:45%; } .video-background iframe{ width:140%; height:140%; } }
</style>
<script>document.documentElement.className='js';</script>
</head>
<body>

<div class="container" id="container">
    <div class="scroller" id="scroller">

        <!-- Room 1 -->
        <div class="room active" id="room1">
            <div class="room__side room__side--back">
                <div class="video-background">
                    <iframe src="https://www.youtube.com/embed/Ft-K5ysqlPc?autoplay=1&mute=1&loop=1&playlist=Ft-K5ysqlPc&controls=0&modestbranding=1&rel=0&playsinline=1" title="Ancient Greece Animation" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
            </div>
        </div>

        <!-- Room 2 -->
        <div class="room" id="room2">
            <div class="room__side room__side--back"></div>
        </div>

    </div>

    <div id="room-nav">
        <button id="prev-room">←</button>
        <button id="next-room">→</button>
    </div>
</div>

<div id="popup">
    <div id="popup-text"></div>
    <button id="close-popup">Κλείσιμο</button>
</div>

<div class="content">
    <header class="codrops-header">
        <h1 class="codrops-header__title">GlobalDiscovery</h1>
        <div class="subject">Αρχαία Ελληνική & Βυζαντινή Ιστορία beta version</div>
    </header>
    <h4 class="location">GlobalDiscovery Virtual Museum of Greek History</h4>
</div>

<script>
// --- Rooms ---
const roomsConfig = [
    { id:'room1', searchTerms:["Zeus","Hera","Poseidon","Athena","Ares","Aphrodite","Hephaestus","Hermes","Apollo","Artemis","Demeter","Hestia","Dionysus","Hades","Persephone"] },
    { id:'room2', searchTerms:["Constantine the Great","Justinian I","Theodora (wife of Justinian I)","Basil II","Alexios I Komnenos","Michael VIII Palaiologos","Hagia Sophia","Deesis","Virgin Hodegetria","Christ Pantocrator","Oranta"] }
];

// --- Fetch Wikipedia (English) ---
async function fetchWikiSummary(title){
    try{
        const res=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(title)}`);
        if (!res.ok) throw new Error('Network response was not ok');
        const data=await res.json();
        return { 
            title:data.title, 
            extract:data.extract||"No information found.", 
            description:data.description||"", 
            image:data.thumbnail?data.thumbnail.source:'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg'
        };
    }catch(err){
        console.error(err);
        return {title, extract:"No information found.", description:"", image:'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg'};
    }
}

// --- Populate Rooms ---
async function populateRooms(){
    for(let room of roomsConfig){
        const roomEl=document.getElementById(room.id);
        const sideEl=roomEl.querySelector('.room__side');
        for(let term of room.searchTerms){
            const wikiData=await fetchWikiSummary(term);
            const wrapper=document.createElement('div');
            wrapper.className='room__img-wrapper';
            wrapper.dataset.desc=wikiData.extract;
            const img=document.createElement('img');
            img.className='room__img'; img.loading='lazy'; img.src=wikiData.image; img.alt=wikiData.title;
            const caption=document.createElement('div'); caption.className='caption'; caption.textContent=wikiData.title;
            wrapper.appendChild(img); wrapper.appendChild(caption); sideEl.appendChild(wrapper);
            wrapper.addEventListener('click',()=>{ 
                const popup=document.getElementById('popup'); 
                const popupText=document.getElementById('popup-text'); 
                popupText.innerHTML=`<strong>${wikiData.title}</strong><br>${wikiData.description?`<em>${wikiData.description}</em><br>`:""}${wikiData.extract}`; 
                popup.style.display='block'; 
            });
        }
    }
}
populateRooms();

// --- Camera controls ---
const container=document.getElementById('container');
const rooms=document.querySelectorAll('.room');
let zoomLevel=1; 
const ZOOM_MIN=0.5; 
const ZOOM_MAX=3.0; 
const ZOOM_SPEED=0.15;

let currentRotateY = 0;
let currentRotateX = 0;

function applyTransform() {
    const transform = `rotateY(${currentRotateY}deg) rotateX(${currentRotateX}deg) scale(${zoomLevel})`;
    rooms.forEach(room => room.style.transform = transform);
}

// Mouse move camera rotation
container.addEventListener('mousemove', e => {
    const rect = container.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    currentRotateY = ((e.clientX - centerX) / (rect.width / 2)) * 15;
    currentRotateX = ((centerY - e.clientY) / (rect.height / 2)) * 10;
    applyTransform();
});

// Wheel zoom
const scroller = document.getElementById('scroller');
scroller.addEventListener('wheel', e => {
    e.preventDefault();
    zoomLevel += (e.deltaY < 0 ? 1 : -1) * ZOOM_SPEED;
    zoomLevel = Math.max(ZOOM_MIN, Math.min(ZOOM_MAX, zoomLevel));
    applyTransform();
}, {passive: false});

// Touch: drag = rotation, pinch = zoom
let initialDistance = null;
let initialZoom = null;

container.addEventListener('touchstart', e => {
    if (e.touches.length === 2) {
        const dx = e.touches[0].clientX - e.touches[1].clientX;
        const dy = e.touches[0].clientY - e.touches[1].clientY;
        initialDistance = Math.hypot(dx, dy);
        initialZoom = zoomLevel;
    }
}, {passive: false});

container.addEventListener('touchmove', e => {
    e.preventDefault();

    if (e.touches.length === 1) {
        // Single finger = camera rotation (same as mouse)
        const rect = container.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        currentRotateY = ((e.touches[0].clientX - centerX) / (rect.width / 2)) * 15;
        currentRotateX = ((centerY - e.touches[0].clientY) / (rect.height / 2)) * 10;
        applyTransform();
    } 
    else if (e.touches.length === 2 && initialDistance !== null) {
        // Pinch zoom
        const dx = e.touches[0].clientX - e.touches[1].clientX;
        const dy = e.touches[0].clientY - e.touches[1].clientY;
        const distance = Math.hypot(dx, dy);
        zoomLevel = initialZoom * (distance / initialDistance);
        zoomLevel = Math.max(ZOOM_MIN, Math.min(ZOOM_MAX, zoomLevel));
        applyTransform();
    }
}, {passive: false});

container.addEventListener('touchend', e => {
    if (e.touches.length < 2) {
        initialDistance = null;
        initialZoom = null;
    }
}, {passive: false});

// Room Navigation
let currentRoom = 0;
const showRoom = index => {
    rooms.forEach((room, i) => room.classList.toggle('active', i === index));
    applyTransform(); // keep current zoom + rotation
};
document.getElementById('prev-room').addEventListener('click', () => {
    currentRoom = (currentRoom - 1 + rooms.length) % rooms.length;
    showRoom(currentRoom);
});
document.getElementById('next-room').addEventListener('click', () => {
    currentRoom = (currentRoom + 1) % rooms.length;
    showRoom(currentRoom);
});
showRoom(currentRoom);

// Popup close
document.getElementById('close-popup').addEventListener('click', () => {
    document.getElementById('popup').style.display = 'none';
});
</script>
</body>
</html>